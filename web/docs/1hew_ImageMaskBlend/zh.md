# Image Mask Blend - 遮罩融合

**节点功能：** `Image Mask Blend` 用遮罩控制图像与背景色的可见性，支持填孔、扩展/收缩、羽化、反转、遮罩不透明度缩放及背景混合强度。批次数量不一致时按最大批次循环处理。

## 输入

| 参数名称 | 入端选择 | 数据类型 | 默认值 | 取值范围 | 描述 |
| -------- | -------- | -------- | ------ | -------- | ---- |
| `image` | 必选 | IMAGE | - | - | 输入图像批次 |
| `mask` | 必选 | MASK | - | - | 遮罩批次（灰度 0–1） |
| `fill_hole` | - | BOOLEAN | True | True/False | 填补遮罩孔洞，保证选区连续 |
| `invert` | - | BOOLEAN | False | True/False | 在形态/羽化之后反转选择区域 |
| `feather` | - | INT | 0 | 0–50 | 高斯羽化半径（像素） |
| `opacity` | - | FLOAT | 1.0 | 0.0–1.0 | 遮罩不透明度缩放系数 |
| `expansion` | - | INT | 0 | -100–100 | 形态学调整：正为膨胀，负为腐蚀（像素） |
| `background_color` | - | STRING | "1.0" | 灰度/HEX/RGB/名称/edge/average | 非遮罩区域底色 |
| `background_opacity` | - | FLOAT | 1.0 | 0.0–1.0 | 非遮罩区域底色与原图的混合强度 |

## 输出

| 输出名称 | 数据类型 | 描述 |
|---------|----------|------|
| `image` | IMAGE | 融合后图像：遮罩内显示原图，遮罩外显示混合底色 |
| `mask` | MASK | 处理后的遮罩张量（0–1），为灰度遮罩乘以 `opacity` |
