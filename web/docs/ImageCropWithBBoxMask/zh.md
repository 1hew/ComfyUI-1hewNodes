# Image Crop with BBox Mask - 图像边界框遮罩裁剪

**节点功能：** `Image Crop with BBox Mask`节点根据遮罩裁切图像，并返回边界框遮罩信息以便后续粘贴回原位置。

## 输入

| 参数名称 | 入端选择 | 数据类型 | 默认值 | 取值范围 | 描述 |
| -------- | -------- | -------- | ------ | -------- | ---- |
| `image` | 必选 | IMAGE | - | - | 要裁剪的图像 |
| `mask` | 必选 | MASK | - | - | 用于裁剪引导的遮罩 |
| `preset_ratio` | - | COMBO[STRING] | mask_ratio | mask_ratio, image_ratio, 1:1, 3:2, 4:3, 16:9, 21:9, 2:3, 3:4, 9:16, 9:21 | 目标预设比例 |
| `scale_strength` | - | FLOAT | 0.0 | 0.0-1.0 | 缩放强度：0.0为基于遮罩的最小裁剪，1.0为图像内最大裁剪 |
| `divisible_by` | - | INT | 8 | 1-64 | 确保输出尺寸能被此值整除 |

## 输出

| 输出名称 | 数据类型 | 描述 |
|---------|----------|------|
| `cropped_image` | IMAGE | 裁剪后的图像 |
| `bbox_mask` | MASK | 用于粘贴回原位置的边界框遮罩 |
| `cropped_mask` | MASK | 裁剪后的遮罩 |

## 功能说明

### 智能比例控制
- **多种比例**：支持基于遮罩比例、图像比例和预设宽高比
- **精确计算**：使用分数运算确保比例精确性
- **自适应调整**：根据图像边界自动调整裁剪尺寸

### 缩放强度控制
- **最小裁剪**：scale_strength=0.0时，基于遮罩边界框进行最小化裁剪
- **最大裁剪**：scale_strength=1.0时，在图像内获取最大符合比例的区域
- **渐进插值**：0.0-1.0之间提供平滑的尺寸过渡