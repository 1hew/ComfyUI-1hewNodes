# Load Image - 目录/文件加载图片

**节点功能：** `Load Image` 用于从文件路径或目录中加载图片，并输出图像批次与对应的遮罩批次。支持递归扫描、索引选择、批量加载，以及基于中心裁剪与缩放的尺寸统一。

## 输入

| 参数名称 | 入端选择 | 数据类型 | 默认值 | 取值范围 | 描述 |
| -------- | -------- | -------- | ------ | -------- | ---- |
| `get_image_size` | 可选 | IMAGE | - | - | 参考图像尺寸（取第一张）用于统一输出尺寸。 |
| `path` | - | STRING | `""` | - | 图片文件路径或目录路径。 |
| `index` | - | INT | `0` | -8192-8192 | `all=false` 时的图片索引；支持负数索引（按数量取模）。 |
| `include_subdir` | - | BOOLEAN | `true` | - | `path` 为目录时包含子目录。 |
| `all` | - | BOOLEAN | `false` | - | 批量加载目录内匹配的全部图片。 |

## 输出

| 输出名称 | 数据类型 | 描述 |
|---------|----------|------|
| `image` | IMAGE | 加载得到的图像（单张或批次，取决于 `all`）。 |
| `mask` | MASK | 与 `image` 对齐的遮罩；由透明通道/调色板透明信息与同名遮罩文件合成。 |

## 功能说明

- 文件/目录输入：支持单文件与目录扫描两种模式。
- 批处理：`all=true` 时将匹配文件打包输出为图像批次。
- 尺寸统一：优先使用 `get_image_size`，否则使用首张图像作为基准，执行中心裁剪与缩放。
- 遮罩提取：从透明信息生成基础遮罩，并与同目录同名遮罩文件合并。
- 稳定排序：路径按大小写无关排序，索引行为更稳定。

## 典型用法

- 批量加载序列帧并统一尺寸，输出到 `Save Video by Image` 进行编码。
- 从目录按索引加载单帧并输出遮罩用于合成与编辑。

## 注意与建议

- 同名遮罩文件支持常见命名，如 `name_mask.png`、`name.mask.webp` 等。

