# Image Stroke by Mask - 遮罩描边

**节点功能**：`Image Stroke by Mask` 对遮罩区域进行描边，并在原始遮罩区域内保留输入图像内容。输出遮罩为描边与原始遮罩的并集。

## Inputs | 输入

| 参数名称 | 入端选择 | 数据类型 | 默认值 | 取值范围 | 描述 |
| -------- | -------- | -------- | ------ | -------- | ---- |
| `image` | - | IMAGE | - | - | 输入图像批次 |
| `mask` | - | MASK | - | - | 输入遮罩批次 |
| `stroke_width` | - | INT | 20 | 0–1000 | 描边宽度（像素） |
| `stroke_color` | - | STRING | `1.0` | 灰度/HEX/RGB/名称 | 描边颜色；支持图像平均色（`a`/`average`）或遮罩加权平均色（`mk`） |

## Outputs | 输出

| 输出名称 | 数据类型 | 描述 |
|---------|----------|------|
| `image` | IMAGE | 在遮罩描边与原始遮罩内显示内容的图像 |
| `mask` | MASK | 描边遮罩与原始遮罩的并集 |

## 功能说明

- 尺寸对齐：将 `mask` 对齐到图像尺寸（LANCZOS）以确保一致。
- 颜色解析：支持灰度、HEX、`R,G,B`、命名颜色、图像平均色与遮罩加权平均色。
- 描边生成：通过椭圆形结构元素膨胀并减去原始遮罩，获得环形描边区域。
- 批量支持：当图像与遮罩批次长度不一致时按索引循环匹配处理。

## 典型用法

- 高亮遮罩区域：用指定颜色描边并保留遮罩内原始内容。
- 基于内容取色：设置 `stroke_color=mk`（遮罩加权平均）或 `a`/`average`（图像平均）。

## 注意与建议

- 输出图像在描边与遮罩之外为黑色；遮罩内内容来自输入图像。
- 描边核尺寸为 `(2×stroke_width+1)`，适合平滑的椭圆膨胀效果。